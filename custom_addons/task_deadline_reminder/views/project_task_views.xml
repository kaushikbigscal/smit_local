<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <record id="inherit_project_task_view_todo_create_form_reminder" model="ir.ui.view">
        <field name="name">project.task.view.todo.create.form.reminder</field>
        <field name="model">project.task</field>
        <field name="inherit_id" ref="project_todo.project_task_view_todo_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='user_ids']" position="after">
                <field name="date_deadline" required="set_reminder"/>
                <label for="set_reminder"/>
                <div class="o_row">
                    <field name="set_reminder"/>
                    <field name="reminder_type_ids" widget="many2many_tags" options='{"no_create": True}'
                           invisible="not set_reminder" required="[('set_reminder', '=', True)]"/>
                </div>
                <field name="is_custom_selected" invisible="1"/>
                <field name="custom_reminder_datetime"
                       invisible="not set_reminder or not is_custom_selected"
                        required="is_custom_selected"/>
            </xpath>
        </field>
    </record>
    <record id="view_task_form2_inherit" model="ir.ui.view">
        <field name="name">view.task.form2.inherit</field>
        <field name="model">project.task</field>
        <field name="inherit_id" ref="project.view_task_form2"/>
        <field name="priority">999</field>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='user_ids']" position="after">
                <label for="set_reminder" invisible="is_fsm"/>
                <div class="o_row" invisible="is_fsm">
                    <field name="set_reminder" invisible="is_fsm"/>
                    <field name="reminder_type_ids" widget="many2many_tags" options='{"no_create": True}'
                           invisible="is_fsm or not set_reminder" required="[('set_reminder', '=', True)]"/>
                </div>
                <field name="is_custom_selected" invisible="1"/>
                <field name="custom_reminder_datetime"
                       invisible="not set_reminder or not is_custom_selected"
                       required="is_custom_selected"/>
            </xpath>
            <xpath expr="//sheet//group//group//div//field[@name='date_deadline']" position="attributes">
                <attribute name="required">set_reminder</attribute>
            </xpath>
        </field>
    </record>

</odoo>